(function(e){function t(t){for(var r,s,o=t[0],l=t[1],c=t[2],u=0,d=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);v&&v(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var o=n[s];0!==i[o]&&(r=!1)}r&&(a.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},s={app:0},i={app:0},a=[];function o(e){return l.p+"js/"+({"main~universe":"main~universe",main:"main",universe:"universe",settings:"settings"}[e]||e)+"."+{"main~universe":"0fc46c6c",main:"08baf65c",universe:"482c42cc",settings:"ec12c724"}[e]+".js"}function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"main~universe":1,universe:1,settings:1};s[e]?t.push(s[e]):0!==s[e]&&n[e]&&t.push(s[e]=new Promise(function(t,n){for(var r="css/"+({"main~universe":"main~universe",main:"main",universe:"universe",settings:"settings"}[e]||e)+"."+{"main~universe":"64b3efd6",main:"31d6cfe0",universe:"0ebd44d2",settings:"d96a8284"}[e]+".css",i=l.p+r,a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var c=a[o],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===r||u===i))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){c=d[o],u=c.getAttribute("data-href");if(u===r||u===i)return t()}var v=document.createElement("link");v.rel="stylesheet",v.type="text/css",v.onload=t,v.onerror=function(t){var r=t&&t.target&&t.target.src||i,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=r,delete s[e],v.parentNode.removeChild(v),n(a)},v.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(v)}).then(function(){s[e]=0}));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise(function(t,n){r=i[e]=[t,n]});t.push(r[2]=a);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=o(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(v);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",d.name="ChunkLoadError",d.type=r,d.request=s,n[1](d)}i[e]=void 0}};var v=setTimeout(function(){c({type:"timeout",target:u})},12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var v=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1449:function(e,t,n){"use strict";var r=n("968f"),s=n.n(r);s.a},"189d":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n("fa12");class s extends r["a"]{constructor(e){super(e,{icon:"fas fa-globe",name:"Online Storage",info:{description:"Saves the universe to your online Lorebrary account.",good:["Syncs across machines and workspaces","Live collaboration tools"],bad:["Storage size is subscription based"]}})}isEnabled(){return!1}async init(){throw new Error("No credentials.")}isAccessible(){return!1}}},"482c":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n("fa12");class s extends r["a"]{constructor(e){super(e,{icon:"fab fa-google-drive",name:"Google Drive",info:{description:"Saves the universe to a database in google drive.",good:["Syncs across machines and workspaces"],bad:["No live collaboration tools","May run in to sync issues"]}})}isEnabled(){return!1}async init(){}isAccessible(){return!1}}},"54c1":function(e){e.exports=JSON.parse('{"title":"Undefined","subtitle":"Error","text":["Something went wrong during the build process."]}')},"56d7":function(e,t,n){"use strict";n.r(t);var r=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.acknowledged!=e.version?n("v-app",{staticStyle:{"background-color":"#37474f"}},[n("v-dialog",{attrs:{persistent:"",value:!0,width:"500"}},[n("v-card",[n("v-card-title",{staticClass:"pb-0 headline",attrs:{"primary-title":""}},[e._v("\n        "+e._s(e.changelog.title)+"\n      ")]),e.changelog.subtitle?n("div",{staticClass:"mx-6 overline"},[e._v("\n        "+e._s(e.changelog.subtitle)+"\n      ")]):e._e(),e.changelog.text?n("v-card-text",{staticClass:"mt-4 py-0"},e._l(e.changelog.text,function(t,r){return n("p",{key:"text-"+r,domProps:{innerHTML:e._s(t)}})}),0):e._e(),e.changelog.changes?n("v-card-text",{staticClass:"mt-4 py-0"},[n("strong",[e._v("Changes")]),e._l(e.changelog.changes.additions,function(t,r){return n("div",{key:"additions-"+r,staticClass:"success--text"},[e._v("+ "+e._s(t))])}),e._l(e.changelog.changes.subtractions,function(t,r){return n("div",{key:"subtractions-"+r,staticClass:"error--text"},[e._v("- "+e._s(t))])})],2):e._e(),e.changelog.bugs?n("v-card-text",{staticClass:"mt-4 py-0"},[n("strong",[e._v("Bugs")]),e._l(e.changelog.bugs.fixed,function(t,r){return n("div",{key:"fixed-"+r,staticClass:"success--text"},[e._v("- "+e._s(t))])}),e._l(e.changelog.bugs.added,function(t,r){return n("div",{key:"added-"+r,staticClass:"error--text"},[e._v("+ "+e._s(t))])})],2):e._e(),n("v-divider"),n("v-card-actions",[n("div",{staticClass:"flex-grow-1"}),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.acknowledgeVersion}},[e._v("\n          Yay!\n        ")])],1)],1)],1)],1):e.$store.state.startup.is?n("div",{attrs:{id:"main-loader"}},[n("span",{staticClass:"loader"},[n("span",{staticClass:"loader-inner"})]),n("div",{attrs:{id:"text"}},e._l(e.$store.state.startup.stages,function(e,t){return n("span",{key:t,class:"dot"+(e.status?" "+e.status:"")})}),0)]):n("div",[n("router-view")],1)},i=[],a={data:()=>({acknowledged:localStorage.getItem("acknowledged"),version:"0.0.1",changelog:null}),methods:{acknowledgeVersion(){localStorage.setItem("acknowledged",this.version),this.acknowledged=this.version}},created(){this.changelog=n("73b0")("./"+this.version+".json")},mounted(){try{this.$store.state.window.frame=window.self!==window.top}catch(e){this.$store.state.window.frame=!0}this.$store.state.window.frame||this.$store.dispatch("doStartup")}},o=a,l=n("2877"),c=n("6544"),u=n.n(c),d=n("7496"),v=n("8336"),p=n("b0af"),f=n("99d9"),h=n("169a"),m=n("ce7e"),g=Object(l["a"])(o,s,i,!1,null,null,null),b=g.exports;u()(g,{VApp:d["a"],VBtn:v["a"],VCard:p["a"],VCardActions:f["a"],VCardText:f["b"],VCardTitle:f["c"],VDialog:h["a"],VDivider:m["a"]});var y=n("8c4f");r["a"].use(y["a"]);var w=new y["a"]({base:"",routes:[{path:"/",component:()=>Promise.all([n.e("main~universe"),n.e("main")]).then(n.bind(null,"6b61")),children:[{path:"search",name:"Global Search",component:()=>Promise.all([n.e("main~universe"),n.e("main")]).then(n.bind(null,"2d3b"))},{path:"notes/:noteId?",name:"Global Notes",component:()=>Promise.all([n.e("main~universe"),n.e("main")]).then(n.bind(null,"0841"))},{path:"",name:"Dashboard",component:()=>Promise.all([n.e("main~universe"),n.e("main")]).then(n.bind(null,"f021"))},{path:"account",name:"Account",component:()=>Promise.all([n.e("main~universe"),n.e("main")]).then(n.bind(null,"029e"))}]},{path:"/universes/:universe",component:()=>Promise.all([n.e("main~universe"),n.e("universe")]).then(n.bind(null,"29e4")),children:[{path:"search",name:"Search",component:()=>Promise.all([n.e("main~universe"),n.e("universe")]).then(n.bind(null,"2d3b"))},{path:"notes/:noteId?",name:"Notes",component:()=>Promise.all([n.e("main~universe"),n.e("universe")]).then(n.bind(null,"0841"))},{path:"",name:"Overview",component:()=>Promise.all([n.e("main~universe"),n.e("universe")]).then(n.bind(null,"5ee7"))},{path:"codex",name:"Codex",meta:{darkAppBar:!0},component:()=>Promise.all([n.e("main~universe"),n.e("universe")]).then(n.bind(null,"519c"))},{path:"maps",name:"Atlas",component:()=>Promise.all([n.e("main~universe"),n.e("universe")]).then(n.bind(null,"5ee7"))},{path:"timelines",name:"Timelines",component:()=>Promise.all([n.e("main~universe"),n.e("universe")]).then(n.bind(null,"5ee7"))},{path:"stories",name:"Stories",component:()=>Promise.all([n.e("main~universe"),n.e("universe")]).then(n.bind(null,"5ee7"))},{path:"resources",component:()=>n.e("settings").then(n.bind(null,"4cf2")),children:[{path:"categories",name:"Categories",component:()=>n.e("settings").then(n.bind(null,"5ee7"))},{path:"images",name:"Images",component:()=>n.e("settings").then(n.bind(null,"5ee7"))},{path:"templates",name:"Templates",component:()=>n.e("settings").then(n.bind(null,"5ee7"))}]},{path:"settings",component:()=>n.e("settings").then(n.bind(null,"4cf2")),children:[{path:"collaborators",name:"Collaborators",component:()=>n.e("settings").then(n.bind(null,"5ee7"))},{path:"followers",name:"Followers",component:()=>n.e("settings").then(n.bind(null,"5ee7"))},{path:"settings",name:"Settings",component:()=>n.e("settings").then(n.bind(null,"5ee7"))}]}]}]}),S=n("2f62"),x=n("11c1"),_=n.n(x),A=n("fa12");r["a"].use(S["a"]);var C=new S["a"].Store({state:{window:{frame:!1,miniDrawer:!0},startup:{is:!0,stages:{}},universes:null,universeLoading:!1,universeSelected:null},getters:{universeList(e){if(!e.universes)throw new Error("Universe list is null!");return Object.values(e.universes)},universe(e){if(!e.universes)throw new Error("No universe selected!");return e.universes[e.universeSelected]},driver(e,t){if(!t.universe)throw new Error("Attempted to access the driver of an invalid universe!");if(!t.universe.driver)throw new Error("Attempted to access the driver of a universe with no driver!");return A["c"][t.universe.driver]}},mutations:{setStartupStage(e,[t,n]){r["a"].set(e.startup.stages,t,n)},setUniverses(e,t){e.universes=t},setUniverse(e,t){r["a"].set(e.universes,t.id,t),e.universeSelected=t.id},setCurrentUniverse(e,t){e.universeSelected=t?t.id:null}},actions:{async doStartup(e){await k(e)},async loadUniverses({commit:e}){let t=[],n={};for(let[r,s]of Object.entries(A["c"]))s.isEnabled()&&t.push(s.getStore().getUniverses().then(e=>{for(let t of e)t.driver=r,n[t.id]={driver:r,id:t.id,name:t.name,description:t.description}}));await Promise.all(t),e("setUniverses",n)},async loadUniverse({commit:e,state:t},n){if(t.universeSelected==n)return;let r=n?t.universes[n]:null,s=r?A["c"][r.driver]:null;if(!s)return void(t.universeSelected=null);t.universeLoading=!0;let i=await s.getStore().getUniverse(n);e("setCurrentUniverse",i),t.universeLoading=!1},async saveUniverse({commit:e,getters:t},n){n.id||(n.id=_.a.v4()),e("setUniverse",n),await t.driver.getStore().saveUniverse(n.id,{id:n.id,name:n.name,description:n.description})},async getArticlesOfType({commit:e,state:t,getters:n},r){return r=r||{},await n.driver.getStore().getArticlesOfType(t.universeSelected,r)},async getArticle({commit:e,state:t,getters:n},r){return r=r||{},await n.driver.getStore().getArticle(t.universeSelected,r)},async saveArticle({commit:e,state:t,getters:n},r){r.id||(r.id=_.a.v4()),await n.driver.getStore().saveArticle(t.universeSelected,{id:r.id,type:r.type,parent:r.parent,icon:r.icon,name:r.name,tags:r.tags,content:r.content})},async deleteArticle({commit:e,state:t,getters:n},r){r=r||{},await n.driver.getStore().deleteArticle(t.universeSelected,r)}}});async function k({dispatch:e,commit:t,state:n}){for(let[s,i]of Object.entries(A["c"]))i.isEnabled()&&t("setStartupStage",["driver-"+s,{status:null}]);for(let[s,i]of Object.entries(A["c"]))if(i.isEnabled())try{await i.init(),t("setStartupStage",["driver-"+s,{status:"done"}])}catch(r){t("setStartupStage",["driver-"+s,{status:"error"}])}await e("loadUniverses"),n.startup.is=!1}var P=n("f309");n("7adb");r["a"].use(P["a"]);var O=new P["a"]({icons:{iconfont:"fa"},theme:{dark:!1,themes:{light:{secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},dark:{primary:"#FFF"}}}}),E=(n("d5e8"),n("15f5"),n("0284")),U=n.n(E);let T=null;function j(e,t){T&&(void 0===t&&(t=null),T.postMessage(JSON.stringify({type:e,payload:t}),"*"))}let N={isReady(e){return{type:"ready",payload:!0}},doStartup(){C.dispatch("doStartup")},isStartedUp(){return!C.state.startup.is}};window.addEventListener("message",e=>{if(!e.origin.startsWith("file://"))return;T=e.source;let{type:t,payload:n}=JSON.parse(e.data);if(N.hasOwnProperty(t)){let e=N[t](n);e&&(e.type?j(e.type,e.payload):j(t,e))}});const L=!0;r["a"].use(U.a,{id:"UA-147224195-1",fields:{dimension1:"0.0.1"},router:w,autoTracking:{exception:!0,pageviewTemplate(e){return e.fullPath}},debug:{enabled:!L,sendHitTask:L}}),r["a"].config.productionTip=!1,r["a"].prototype.$drivers=A["c"],r["a"].component("app-footer",n("fd2d").default),new r["a"]({router:w,store:C,vuetify:O,render:function(e){return e(b)}}).$mount("#app")},6354:function(e,t,n){"use strict";n.r(t),n.d(t,"BrowserStore",function(){return a}),n.d(t,"default",function(){return o});var r=n("fa12");const s=n("0dff");function i(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}class a extends r["b"]{constructor(){super(),this.universes=new s("universes"),this.articles=new s("articles")}async init(){this.universes.loadDatabase(),this.articles.loadDatabase()}getUniverses(){return new Promise(e=>this.universes.find({},(t,n)=>e(n)))}getUniverse(e){return new Promise(e=>this.universes.findOne({},(t,n)=>e(n)))}async saveUniverse(e,t){this.universes.update({id:e},t,{upsert:!0})}async deleteUniverse(e){this.universes.remove({id:e})}async getArticlesOfType(e,t){return void 0!==t.search&&(t.name=new RegExp(i(t.search),"gi"),delete t.search),new Promise(n=>{this.articles.find({universe:e,...t},(e,t)=>n(t))})}async getArticles(e,t){return void 0!==t.search&&(t.name=new RegExp(i(t.search),"gi"),delete t.search),new Promise(n=>{this.articles.find({universe:e,...t},(e,t)=>{let r={};for(let n of t)r[n.id]=n;this.articles.find({$or:t.map(e=>({parent:e.id}))},{parent:1},(e,s)=>{for(let t of s)r[t.parent].children||(r[t.parent].children=[]);n(t)})})})}async getArticle(e,t){return new Promise(n=>this.articles.findOne({universe:e,id:t},(e,t)=>n(t)))}async saveArticle(e,t){this.articles.update({universe:e,id:t.id},{universe:e,...t},{upsert:!0})}async deleteArticle(e,t){if(t.retainChildren){let n=await this.getArticle(t.id);this.articles.remove({universe:e,id:t.id}),this.articles.update({universe:e,parent:t.id},{$set:{parent:n.parent}},{upsert:!0})}else{let n=[],r=await this.getArticles(e,t.id);for(let t of r)n.push(await this.deleteArticle(e,{id:t.id,retainChildren:!1}));this.articles.remove({universe:e,id:t.id}),await Promise.all(n)}}}class o extends r["a"]{constructor(e){super(e,{icon:"fas fa-sticky-note",name:"Browser Storage",info:{description:"Saves the universe to a your browser's local storage.",good:["No storage limit (with permission)"],bad:["No live collaboration tools","Might not persist across sessions"]}}),this.store=new a}isEnabled(){return!0}async init(){await this.store.init()}isAccessible(){return!0}}},"73b0":function(e,t,n){var r={"./0.0.1.json":"a5e8","./template.json":"ebb1","./undefined.json":"54c1"};function s(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=i,e.exports=s,s.id="73b0"},"7adb":function(e,t,n){},8862:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n("fa12");class s extends r["a"]{constructor(e){super(e,{icon:"fab fa-dropbox",name:"Dropbox",info:{description:"Saves the universe to a database in dropbox.",good:["Syncs across machines and workspaces"],bad:["No live collaboration tools","May run in to sync issues","Little storage available"]}})}isEnabled(){return!1}async init(){}isAccessible(){return!1}}},"968f":function(e,t,n){},a5e8:function(e){e.exports=JSON.parse('{"title":"First Public Build","subtitle":"Holy functionality, batman!","media":null,"text":["The pre-alpha release of Lorebrary is available, rejoice! Please remember that this is in heavy development, do not yet store any precious information here that you are not willing to lose!","If you find any bugs, please notify us in the <a href=\\"https://discord.gg/8bA24C9\\" target=\\"_blank\\">discord</a>, also linked in the footer!"]}')},bd2b:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n("fa12");class s extends r["a"]{constructor(e){super(e,{icon:"fas fa-hdd",name:"Hard Drive",info:{description:"Saves the universe to your hard drive.",good:["No storage limit"],bad:["No live collaboration tools"]}})}isEnabled(){return!1}async init(){}isAccessible(){return!1}}},ebb1:function(e){e.exports=JSON.parse('{"title":"Title for update","subtitle":"Typically be the type of release it was.","media":"Link for media to show","text":["Quick explanation text","Each array item is a new paragraph"],"changes":{"additions":["List of additions"],"subtractions":["List of removals"]},"bugs":{"fixed":["List of bugs fixed"],"added":["List of known bugs added"]}}')},fa12:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return i});const r=new Proxy({},{get(e,t){return new Promise(()=>{throw new Error("Unsupported store function '"+t+"'")})}});class s{constructor(e,t){this.id=e,this.icon=t.icon,this.name=t.name,this.info=t.info,this.store=t.store||r,this.capabilities={}}getStore(){return this.store}getCapabilities(){return this.capabilities}getCapability(e){return this.capabilities[e]}isEnabled(){return!1}async init(){}isAccessible(){return!1}}class i{async getUniverses(){return[]}async getUniverse(e){return null}async saveUniverse(e,t){}async deleteUniverse(e){}async getArticlesOfType(e,t){return null}async getArticles(e,t){return null}async getArticle(e,t){return null}async saveArticle(e,t){}async deleteArticle(e,t){}}t["c"]={online:new(n("189d").default)("online"),google:new(n("482c").default)("google"),dropbox:new(n("8862").default)("dropbox"),drive:new(n("bd2b").default)("drive"),browser:new(n("6354").default)("browser")}},fd2d:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-footer",{staticClass:"app-footer",attrs:{dark:"",absolute:"",padless:""}},[n("v-col",{staticClass:"pa-2 text-center",attrs:{cols:"12"}},[n("a",{attrs:{href:"https://discord.gg/8bA24C9",target:"_blank"}},[n("v-icon",{attrs:{size:"24px"}},[e._v("fab fa-discord")])],1),n("span",{staticClass:"px-1"}),e._v("\n        "+e._s((new Date).getFullYear())+" — CodingForCookies\n    ")])],1)},s=[],i=(n("1449"),n("2877")),a=n("6544"),o=n.n(a),l=n("62ad"),c=n("553a"),u=n("132d"),d={},v=Object(i["a"])(d,r,s,!1,null,"63cc30d6",null);t["default"]=v.exports;o()(v,{VCol:l["a"],VFooter:c["a"],VIcon:u["a"]})}});
//# sourceMappingURL=app.f503769b.js.map